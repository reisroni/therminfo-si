/*
 * One Click Upload v1.1.2 - jQuery Plugin
 * Copyright (c) 2008 Michael Mitchell - http://www.michaelmitchell.co.nz
 */
(function(c){c.fn.upload=function(b){b=c.extend({name:"file",enctype:"multipart/form-data",action:"",autoSubmit:!0,onSubmit:function(){},onComplete:function(){},onSelect:function(){},params:{}},b);return new c.ocupload(this,b)};c.ocupload=function(b,d){var e=this,i=(new Date).getTime().toString().substr(8),j=c('<iframe id="iframe'+i+'" name="iframe'+i+'"></iframe>').css({display:"none"}),f=c('<form method="post" enctype="'+d.enctype+'" action="'+d.action+'" target="iframe'+i+'"></form>').css({margin:0,
padding:0}),g=c('<input name="'+d.name+'" type="file" />').css({position:"relative",display:"block",marginLeft:"-175px",opacity:0});b.wrap('<div id="a-file"></div>');f.append(g);b.after(f);b.after(j);var h=b.parent().css({position:"relative",height:b.outerHeight()+"px",width:b.outerWidth()+"px",overflow:"hidden",cursor:"pointer",margin:"5px auto",padding:0});g.css("marginTop",-h.height()-10+"px");h.mousemove(function(a){g.css({top:a.pageY-h.offset().top+"px",left:a.pageX-h.offset().left+"px"})});
g.change(function(){e.onSelect();e.autoSubmit&&e.submit()});c.extend(this,{autoSubmit:!0,onSubmit:d.onSubmit,onComplete:d.onComplete,onSelect:d.onSelect,filename:function(){return g.attr("value")},params:function(a){if(a=a?a:!1)d.params=c.extend(d.params,a);else return d.params},name:function(a){if(a&&a)g.attr("name",value);else return g.attr("name")},action:function(a){if(a=a?a:!1)f.attr("action",a);else return f.attr("action")},enctype:function(a){if(a=a?a:!1)f.attr("enctype",a);else return f.attr("enctype")},
set:function(a,b){function d(a,b){switch(a){default:throw Error("[jQuery.ocupload.set] '"+a+"' is an invalid option.");case "name":e.name(b);break;case "action":e.action(b);break;case "enctype":e.enctype(b);break;case "params":e.params(b);break;case "autoSubmit":e.autoSubmit=b;break;case "onSubmit":e.onSubmit=b;break;case "onComplete":e.onComplete=b;break;case "onSelect":e.onSelect=b}}(b=b?b:!1)?d(a,b):c.each(a,function(a,b){d(a,b)})},submit:function(){this.onSubmit();c.each(d.params,function(a,b){f.append(c('<input type="hidden" name="'+
a+'" value="'+b+'" />'))});f.submit();j.unbind().load(function(){var a=document.getElementById(j.attr("name")),a=c(a.contentWindow.document.body).text();e.onComplete(a)})}})}})(jQuery);